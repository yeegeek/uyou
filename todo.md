# UYOU 无忧陪伴 - 开发计划

> 按模块分阶段开发计划 | 使用 AI 辅助开发

> 版本：v1.7 | 更新日期：2026-01-15 | 项目状态：Phase 0 已完成，Phase 1 待开始

---

## 开发概览

| 阶段 | 内容 | 前置依赖 | 状态 |
|------|------|----------|------|
| Phase 0 | 产品设计（PRD、数据库、API设计） | 无 | ✅ 已完成 |
| Phase 0.5 | 外部申请（微信支付、小程序备案等） | 营业执照 | ⏳ 进行中 |
| Phase 0.6 | UI设计（设计规范、页面布局、效果图） | Phase 0 | ⏳ 进行中 |
| Phase 1 | 基础架构搭建 | Phase 0 | ⏳ 待开始 |
| Phase 2 | 用户端核心功能 | Phase 1 + 支付接口 | ⏳ 待开始 |
| Phase 3 | 情感顾问端核心功能 | Phase 2 | ⏳ 待开始 |
| Phase 4 | 管理后台 | Phase 2 | ⏳ 待开始 |
| Phase 5 | 安全与风控 | Phase 3 | ⏳ 待开始 |
| Phase 6 | 测试与上线 | Phase 4+5 | ⏳ 待开始 |

---

## Phase 0.5: 外部申请（并行进行）

> 重要：这些申请需要时间，建议与开发并行进行，避免阻塞后续开发

### 任务清单

- [ ] **微信小程序账号申请**（阻塞Phase 1）
  - [ ] 企业认证、小程序备案、获取 AppID 和 AppSecret

- [ ] **微信支付商户号申请**（阻塞Phase 2）
  - [ ] 提交企业资质、对公账户验证、获取商户号和API密钥

- [ ] **腾讯云服务申请**（阻塞Phase 2）
  - [ ] 账号注册、IM服务开通、COS服务开通、获取API密钥

- [ ] **隐私号服务申请**（阻塞Phase 2）
  - [ ] 阿里云/腾讯云隐私号服务开通、获取API密钥

- [ ] **实名认证API申请**（阻塞Phase 3）
  - [ ] 选择服务商、开通身份证+人脸识别服务、获取API密钥

- [ ] **短信服务申请**（阻塞Phase 1）
  - [ ] 腾讯云/阿里云短信服务开通、配置短信模板、获取API密钥

- [ ] **保险服务接入**（可选，MVP后可补，阻塞Phase 5）
  - [ ] 选择保险服务商、对接人身意外险API

---

## Phase 0.6: UI设计

> 目标：完成微信小程序UI设计，包括设计规范、页面布局说明、效果图生成  
> 前置依赖：Phase 0（产品设计已完成）

### 0.6.1 设计规范文档

- [x] **设计规范文档创建**
  - [x] 创建 `docs/ui-design.md` 设计规范文档
  - [x] 定义颜色系统（主色、辅助色、中性色、功能色）
  - [x] 定义字体规范（字号、字重、行高）
  - [x] 定义间距系统（4px基础单位）
  - [x] 定义圆角、阴影规范

- [x] **组件库说明**
  - [x] 基础组件（按钮、输入框、标签、头像、评分）
  - [x] 业务组件（顾问卡片、订单卡片、需求卡片、消息气泡）
  - [x] 布局组件（导航栏、底部Tab、列表、空状态、加载状态）

- [x] **信息架构**
  - [x] 绘制整体架构图（使用Mermaid）
  - [x] 梳理用户端页面层级（23个页面）
  - [x] 梳理顾问端页面层级（12个页面）
  - [x] 梳理通用页面（4个页面）

- [x] **页面布局说明**
  - [x] 为所有30个页面编写详细布局说明
  - [x] 包含页面结构、关键元素、交互状态说明

### 0.6.2 AI生成效果图

- [ ] **选择AI工具**
  - [ ] 选择AI设计工具（推荐：即时设计AI或MasterGo AI）
  - [ ] 注册账号并熟悉工具使用

- [ ] **生成核心流程页面效果图**（P0，8个页面）
  - [ ] 发现首页（`discovery_index.png`）
  - [ ] 顾问详情（`consultant_detail.png`）
  - [ ] 预约顾问（`order_create.png`）
  - [ ] 订单确认（`order_confirm.png`）
  - [ ] 支付页（`payment_index.png`）
  - [ ] 订单列表（`order_list.png`）
  - [ ] 订单详情（`order_detail.png`）
  - [ ] 登录页（`auth_login.png`）

- [ ] **生成主要功能页面效果图**（P0，16个页面）
  - [ ] 发布需求、我的需求、需求详情
  - [ ] 消息列表、聊天页
  - [ ] 个人中心、编辑资料、我的收藏
  - [ ] 工作台、需求大厅、收入概览
  - [ ] 申请入驻、审核状态、培训考核
  - [ ] 服务设置、主页管理

- [ ] **生成次要功能页面效果图**（P1，6个页面）
  - [ ] 搜索页、实名认证、评价列表
  - [ ] 投诉举报、通知列表、评价管理

- [ ] **效果图整理**
  - [ ] 按命名规范保存到 `docs/ui-design/mockups/` 目录
  - [ ] 检查效果图是否符合设计规范
  - [ ] 整理效果图清单

### 0.6.3 设计评审与迭代

- [ ] **设计评审**
  - [ ] 内部评审设计稿（检查是否符合业务需求）
  - [ ] 检查是否符合微信小程序设计规范
  - [ ] 检查颜色、字体、间距是否统一

- [ ] **设计优化**
  - [ ] 调整不符合规范的设计
  - [ ] 完善交互细节
  - [ ] 优化视觉效果

- [ ] **设计交付**
  - [ ] 整理设计规范文档
  - [ ] 导出切图资源（如需要）
  - [ ] 交付给开发团队

### Phase 0.6 检查清单

- [x] 设计规范文档已完成
- [x] 所有页面布局说明已完成
- [ ] 核心流程页面效果图已生成
- [ ] 主要功能页面效果图已生成
- [ ] 设计评审已完成
- [ ] 设计已交付给开发团队

---

## Phase 1: 基础架构搭建

> 目标：搭建项目基础架构，包括后端框架、数据库、开发环境等  
> 开发环境：Docker 优先，所有服务和依赖容器化

### 1.0 Docker 开发环境搭建

- [ ] **Docker 环境准备**
  - [ ] 安装 Docker Desktop/Engine、docker-compose，验证版本

- [x] **创建 docker-compose.yml**
  - [x] 配置 PostgreSQL（PostGIS扩展）、Redis、网络和卷挂载、环境变量文件

- [ ] **创建 Dockerfile**
  - [ ] 配置多阶段构建（开发/生产）、热重载支持

- [ ] **验证 Docker 环境**
  - [ ] 启动所有服务，验证 PostgreSQL 和 Redis 连接

### 项目初始化

- [x] **后端项目初始化**
  - [x] 创建 NestJS 项目，配置 TypeScript（严格模式）、ESLint + Prettier、Git、环境变量管理

- [x] **数据库初始化**
  - [x] 配置 Prisma ORM，创建 Schema（基于模块文档），配置数据库连接，执行迁移，验证 PostGIS，配置连接池，确认共享表定义

- [ ] **Redis 初始化**
  - [ ] 配置 Redis 连接，缓存策略，分布式锁，缓存服务（失效更新、主动更新、预热缓存）

### 公共模块搭建

- [x] **Common 模块**
  - [x] 异常过滤器、响应拦截器、验证管道、装饰器（@User()）、常量定义（错误码）已完成
  - [ ] 日志拦截器、工具函数（加密、解密、格式化）、统一推送服务、时间字段转换工具、分页工具函数、数据脱敏工具函数待补充

- [x] **Config 模块**
  - [x] 数据库配置、Redis 配置、微信配置、腾讯云配置、JWT 配置、环境变量验证

- [x] **Database 模块**
  - [x] Prisma Service、数据库连接管理、迁移脚本管理

### 认证基础

- [x] **Auth 模块基础**
  - [x] 安装依赖（@nestjs/jwt, @nestjs/passport, passport-jwt），创建 JWT Strategy、JWT Auth Guard、实现 Token 生成/验证/刷新
  - [ ] Roles Guard待补充

### 开发工具配置

- [x] **开发环境**
  - [x] 配置热重载、API 文档（Swagger/OpenAPI）、接口限流
  - [ ] 调试配置待补充

- [ ] **测试环境**
  - [ ] 配置单元测试（Jest）、E2E 测试、测试数据库配置

- [ ] **代码质量**
  - [ ] 配置 Husky、lint-staged、Commitlint

### 部署准备（可选，MVP后可补）

- [ ] **生产环境 Docker 配置**
  - [ ] 创建生产环境 docker-compose.yml、Dockerfile、Nginx 反向代理、健康检查

- [ ] **CI/CD 准备**
  - [ ] GitHub Actions / GitLab CI 配置、自动化测试/部署流程

### Phase 1 检查清单

- [ ] Docker 环境正常启动，PostgreSQL（PostGIS）和 Redis 容器运行正常
- [ ] 后端项目正常启动，数据库连接正常，所有表已创建
- [ ] Redis 连接正常，JWT 认证流程正常工作
- [ ] API 文档可正常访问，环境变量配置完整，代码规范检查通过

---

## Phase 2: 用户端核心功能

> 目标：完成用户端核心功能，包括认证、用户信息、发现、需求发布、订单、支付等

### 2.1 认证模块（`02-auth`）

- [ ] **微信登录**
  - [ ] 实现微信登录接口（`POST /auth/wechat/login`）
  - [ ] 获取微信 OpenID/UnionID
  - [ ] 创建/更新用户记录
  - [ ] 返回 JWT Token

- [ ] **手机号绑定**
  - [ ] 实现手机号绑定接口（`POST /auth/wechat/bind-phone`）
  - [ ] 验证微信手机号授权
  - [ ] 更新用户手机号（加密存储）

- [ ] **Token 刷新**
  - [ ] 实现 Token 刷新接口（`POST /auth/refresh`）
  - [ ] 验证 Refresh Token
  - [ ] 返回新的 Access Token

### 2.2 用户模块（`01-users`）

- [ ] **用户信息管理**
  - [ ] 获取当前用户信息（`GET /users/me`）
  - [ ] 更新用户信息（`PATCH /users/me`）
  - [ ] 上传头像（集成腾讯云COS）

- [ ] **实名认证**
  - [ ] 提交实名认证（`POST /users/verification`）
  - [ ] 调用实名认证API（身份证+人脸识别）
  - [ ] 保存认证信息（加密存储）
  - [ ] 查询认证状态（`GET /users/verification`）

- [ ] **紧急联系人**
  - [ ] 设置紧急联系人（`POST /users/emergency-contacts`）
  - [ ] 查询紧急联系人（`GET /users/emergency-contacts`）
  - [ ] 更新/删除紧急联系人

- [ ] **收藏与屏蔽**
  - [ ] 收藏顾问（`POST /users/favorites`）
  - [ ] 取消收藏（`DELETE /users/favorites/:id`）
  - [ ] 查询收藏列表（`GET /users/favorites`）
  - [ ] 屏蔽顾问（`POST /users/blocks`）
  - [ ] 查询屏蔽列表（`GET /users/blocks`）
  - [ ] 统一收藏和屏蔽API定义（移除发现模块中的重复定义，统一到用户模块）
 4.2

### 2.3 发现模块（`13-discovery`）

- [ ] **城市与类目**
  - [ ] 获取城市列表（`GET /discovery/cities`）
  - [ ] 获取服务类目列表（`GET /discovery/categories`）
  - [ ] 获取类目详情（`GET /discovery/categories/:id`）
13-discovery.md`

- [ ] **顾问推荐**
  - [ ] 获取推荐顾问列表（`GET /discovery/consultants/recommended`）
  - [ ] 实现推荐算法（评分、距离、活跃度）
  - [ ] 实现推荐算法的详细公式（建议复用需求匹配算法：距离分×40% + 评分分×30% + 偏好分×20% + 活跃分×10%，或明确两者的区别）
  - [ ] 统一推荐算法和匹配算法（在 ` 中定义共享算法，两个模块都引用，或明确两者的区别）
  - [ ] 实现推荐结果的缓存策略（缓存Key、过期时间、更新策略）
  - [ ] 实现推荐算法的更新频率（实时计算 vs 定时更新）
  - [ ] 获取热门顾问（`GET /discovery/consultants/popular`）
、4.3

- [ ] **顾问搜索**
  - [ ] 搜索顾问（`GET /discovery/consultants/search`）
  - [ ] 支持关键词搜索（昵称、简介）
  - [ ] 支持筛选（城市、类目、性别、价格区间）
  - [ ] 支持排序（距离、评分、价格）

- [ ] **顾问详情**
  - [ ] 获取顾问详情（`GET /discovery/consultants/:id`）
  - [ ] 获取顾问评价列表（`GET /discovery/consultants/:id/reviews`）
  - [ ] 获取顾问服务设置（`GET /discovery/consultants/:id/services`）

### 2.4 需求模块（`06-demands`）

- [ ] **需求发布**
  - [ ] 发布需求（`POST /demands`）
  - [ ] 需求参数验证（时间、地点、预算等）
  - [ ] 需求状态管理（pending → matching → matched → confirmed）

- [ ] **需求管理**
  - [ ] 查询我的需求列表（`GET /demands/my`）
  - [ ] 查询需求详情（`GET /demands/:id`）
  - [ ] 查询申请列表（`GET /demands/:id/applications`）
  - [ ] 选择顾问（`POST /demands/:id/select-consultant`）
  - [ ] 取消需求（`POST /demands/:id/cancel`）

- [ ] **需求大厅**
  - [ ] 查询需求大厅列表（`GET /demands/hall`）
  - [ ] 支持筛选（城市、类目、预算区间）
  - [ ] 支持排序（时间、预算）

- [ ] **智能匹配**（核心功能）
  - [ ] 实现匹配算法（距离、评分、偏好、活跃度）
  - [ ] 使用 PostGIS 计算地理位置距离
  - [ ] 使用 Redis 缓存匹配结果
  - [ ] 异步计算匹配分数（消息队列）
  - [ ] 推送给 TOP 10 匹配顾问
 和 `docs/tech-architecture.md`

- [ ] **需求匹配锁定机制**（核心功能）
  - [ ] 实现需求锁定表（`demand_locks`）
  - [ ] 实现锁定状态查询接口（`GET /demands/:id/lock-status`）
  - [ ] 实现60秒锁定逻辑（推送给顾问后锁定需求）
  - [ ] 实现锁定超时处理定时任务（每10秒检查一次，释放超时锁定）
  - [ ] 实现锁定状态管理（0锁定中/1已响应/2已超时）
  - [ ] 实现需求状态流转（pending → matching → locked → matched → confirmed）

### 2.5 订单模块（`04-orders`）

- [ ] **订单创建**
  - [ ] 从需求生成订单（`POST /orders/from-demand`）
  - [ ] 直接预约顾问（`POST /orders`）
  - [ ] 订单参数验证（服务时间、时长、地点等）
  - [ ] 价格计算（总价、平台费、顾问收入）
  - [ ] 保存顾问信息快照

- [ ] **订单状态管理**
  - [ ] 实现订单状态机
  - [ ] 订单状态流转逻辑
  - [ ] 订单状态查询（`GET /orders/:id`）
  - [ ] 查询我的订单列表（`GET /orders/my`）

- [ ] **订单操作**
  - [ ] 取消订单（`POST /orders/:id/cancel`）
  - [ ] 实现阶梯退款规则（服务未开始：24h以上100%，12-24h 50%，12h内0%）
  - [ ] 实现服务进行中取消订单的退款计算（按已服务时长比例扣除）
  - [ ] 实现已服务时长比例计算逻辑（实际服务时长 / 预约总时长）
  - [ ] 实现最低退款金额校验（如果已服务超过50%，可能不退款）
  - [ ] 确认服务完成（`POST /orders/:id/confirm`）

- [ ] **定时任务**
  - [ ] 订单超时取消（12小时未接单 → expired）
  - [ ] 订单支付超时（30分钟未支付 → cancelled）
  - [ ] 订单自动确认（24小时未确认 → completed）
  - [ ] 使用 `@nestjs/schedule` 实现定时任务
  - [ ] 实现定时任务的分布式锁（防止多实例重复执行）
  - [ ] 实现定时任务失败重试机制（重试次数、重试间隔、失败告警）
  - [ ] 实现定时任务执行日志记录（执行时间、执行结果、失败原因）
 3.4

### 2.6 支付模块（`05-payments`）

> 重要说明：用户仅支持微信支付，所有消费和退款直接通过微信，无钱包余额功能

- [ ] **微信支付集成**
  - [ ] 安装微信支付SDK
  - [ ] 创建支付订单（`POST /payments`）
  - [ ] 生成支付参数（小程序调起支付）
  - [ ] 支付回调处理（`POST /payments/notify`）
  - [ ] 支付回调签名验证
  - [ ] 分布式锁（防止重复回调）
  - [ ] 实现支付状态与订单状态同步机制
  - [ ] 实现支付回调失败重试机制（最多3次，每次间隔5分钟）
  - [ ] 实现支付超时处理（30分钟未支付自动取消）
  - [ ] 实现支付状态一致性检查

- [ ] **支付流程（用户端）**
  - [ ] 订单支付（`POST /payments`，仅支持微信支付）
  - [ ] 支持优惠券使用
  - [ ] 实现优惠券领取规则（每人限领、每日限领、总量限制）
  - [ ] 实现优惠券使用校验（订单金额、类目限制、城市限制、时间限制）
  - [ ] 实现优惠券过期处理定时任务（每天凌晨清理过期优惠券）
  - [ ] 实现优惠券过期前3天提醒通知（可选）
  - [ ] 支付成功后更新订单状态
  - [ ] 资金进入平台托管（资金池）

- [ ] **退款处理（用户端）**
  - [ ] 申请退款（`POST /payments/refund`）
  - [ ] 调用微信退款API（原路退回微信）
  - [ ] 退款回调处理
  - [ ] 更新订单和支付状态
  - [ ] 按订单取消规则计算退款金额

- [ ] **消费记录查询（用户端）**
  - [ ] 查询支付记录（`GET /payments/records`）
  - [ ] 支持筛选（支付/退款）
  - [ ] 支持分页查询

### 2.7 通知模块（`11-notifications`）

- [ ] **系统通知**
  - [ ] 创建通知接口（`POST /notifications`）
  - [ ] 查询通知列表（`GET /notifications`）
  - [ ] 标记已读（`PATCH /notifications/:id/read`）
  - [ ] 全部标记已读（`PATCH /notifications/read-all`）

- [ ] **消息队列**
  - [ ] 配置 Bull + Redis（消息队列）
  - [ ] 创建通知队列（遵循00-shared.md 3.2规范，设置队列优先级）
  - [ ] 异步发送通知（订单状态变更、需求匹配等）
  - [ ] 实现消息失败处理机制（重试次数、重试间隔、死信队列）
  - [ ] 实现消息队列监控（队列长度、处理速度、失败率）
  - [ ] 统一推送服务设计（在 ` 中定义统一的推送服务接口，系统通知和消息通知都调用）
  - [ ] 明确系统通知和消息通知的区别（系统通知：业务事件通知，单向推送；消息通知：用户间实时通讯，双向交互）
 3.2

- [ ] **推送集成**（可选，MVP后可补）
  - [ ] 微信小程序订阅消息
  - [ ] 推送模板配置

### 2.8 评价模块（`07-reviews`）

- [ ] **评价功能**
  - [ ] 提交评价（`POST /reviews`）
  - [ ] 查询评价列表（`GET /reviews`）
  - [ ] 评价标签管理
  - [ ] 打赏功能（`POST /reviews/:id/tip`）
  - [ ] 实现评价审核流程（0待审核/1显示/2审核拒绝）
  - [ ] 实现评价审核通过后的评分更新
  - [ ] 实现评价删除后的评分重新计算
  - [ ] 实现评分更新的事务处理
  - [ ] 实现评分缓存机制（Redis缓存顾问评分，定期同步到数据库）

### 2.9 微信小程序端开发（`miniprogram`）

> 目标：完成微信小程序用户端开发，包括页面、组件、API集成等  
> 前置依赖：Phase 1（基础架构）+ Phase 0.6（UI设计）

#### 2.9.1 项目初始化

- [ ] **小程序项目搭建**
  - [ ] 创建微信小程序项目（使用微信开发者工具）
  - [ ] 配置 TypeScript
  - [ ] 配置项目结构（pages、components、services、utils、types）
  - [ ] 配置 app.json（页面路由、Tab配置、窗口配置）
  - [ ] 配置 project.config.json

- [ ] **开发环境配置**
  - [ ] 配置 API 基础地址（开发/生产环境）
  - [ ] 配置请求拦截器（Token注入、错误处理）
  - [ ] 配置响应拦截器（统一错误处理、Token刷新）
  - [ ] 配置环境变量管理

#### 2.9.2 公共模块开发

- [ ] **API服务封装**
  - [ ] 封装统一请求方法（基于wx.request）
  - [ ] 实现请求拦截（Token注入、Loading显示）
  - [ ] 实现响应拦截（错误处理、Token刷新）
  - [ ] 实现请求重试机制
  - [ ] 创建各模块API服务文件（auth、user、discovery、demand、order、payment等）

- [ ] **工具函数**
  - [ ] 日期格式化工具
  - [ ] 价格格式化工具
  - [ ] 距离格式化工具
  - [ ] 图片上传工具（集成腾讯云COS）
  - [ ] 位置选择工具（地图选点）
  - [ ] 数据验证工具

- [ ] **状态管理**（可选）
  - [ ] 配置状态管理（如需要，可使用 MobX 或自定义状态管理）
  - [ ] 用户信息状态管理
  - [ ] 全局配置状态管理

- [ ] **公共组件**
  - [ ] 加载组件（Loading）
  - [ ] 空状态组件（Empty）
  - [ ] 错误提示组件（Error）
  - [ ] 弹窗组件（Modal、ActionSheet）
  - [ ] 底部Tab组件（如需要自定义）

#### 2.9.3 页面开发（用户端）

- [ ] **认证相关页面**
  - [ ] 登录页（`pages/auth/login`）
    - [ ] 微信一键登录
    - [ ] 手机号绑定
    - [ ] 协议勾选

- [ ] **发现模块页面**
  - [ ] 发现首页（`pages/discovery/index`）
    - [ ] 城市切换
    - [ ] 服务分类入口
    - [ ] 推荐顾问列表
    - [ ] 下拉刷新、上拉加载
  - [ ] 搜索页（`pages/discovery/search`）
    - [ ] 搜索框
    - [ ] 筛选条件（性别、年龄、价格、排序）
    - [ ] 搜索结果列表
  - [ ] 顾问详情（`pages/consultant/detail`）
    - [ ] 照片轮播
    - [ ] 基本信息展示
    - [ ] 视频介绍播放
    - [ ] 服务价格列表
    - [ ] 评价列表
    - [ ] 收藏功能
    - [ ] 咨询/立即预约按钮

- [ ] **需求模块页面**
  - [ ] 发布需求（`pages/demand/create`）
    - [ ] 服务类目选择
    - [ ] 服务模式选择
    - [ ] 时间地点选择
    - [ ] 预算范围输入
    - [ ] 期望条件选择
    - [ ] 需求描述输入
    - [ ] 表单验证
  - [ ] 我的需求（`pages/demand/list`）
    - [ ] 状态Tab切换
    - [ ] 需求列表展示
    - [ ] 需求状态标识
  - [ ] 需求详情（`pages/demand/detail`）
    - [ ] 需求信息展示
    - [ ] 申请列表展示
    - [ ] 选择顾问功能

- [ ] **订单模块页面**
  - [ ] 预约顾问（`pages/order/create`）
    - [ ] 顾问信息展示
    - [ ] 服务信息填写
    - [ ] 表单验证
  - [ ] 订单确认（`pages/order/confirm`）
    - [ ] 订单信息展示
    - [ ] 优惠券选择
    - [ ] 费用明细
    - [ ] 确认支付
  - [ ] 订单列表（`pages/order/list`）
    - [ ] 状态Tab切换
    - [ ] 订单卡片展示
    - [ ] 订单状态标识
  - [ ] 订单详情（`pages/order/detail`）
    - [ ] 订单状态展示
    - [ ] 订单信息展示
    - [ ] 操作按钮（取消、支付、确认完成、评价等）
  - [ ] 评价页（`pages/order/review`）
    - [ ] 评分选择
    - [ ] 评价标签选择
    - [ ] 文字评价输入
    - [ ] 打赏小费（五星好评时）

- [ ] **支付模块页面**
  - [ ] 支付页（`pages/payment/index`）
    - [ ] 订单信息展示
    - [ ] 支付金额展示
    - [ ] 调用微信支付
    - [ ] 支付结果处理

- [ ] **通讯模块页面**
  - [ ] 消息列表（`pages/message/list`）
    - [ ] 会话列表展示
    - [ ] 未读数标识
    - [ ] 最后消息预览
  - [ ] 聊天页（`pages/message/chat`）
    - [ ] 消息气泡展示
    - [ ] 文字输入
    - [ ] 语音输入
    - [ ] 图片选择
    - [ ] 位置分享
    - [ ] 音视频入口（线上服务）

- [ ] **个人中心页面**
  - [ ] 个人中心（`pages/profile/index`）
    - [ ] 用户信息卡片
    - [ ] 功能入口网格
  - [ ] 编辑资料（`pages/profile/edit`）
    - [ ] 头像上传
    - [ ] 基本信息编辑
  - [ ] 实名认证（`pages/profile/verification`）
    - [ ] 身份证上传
    - [ ] 人脸识别
  - [ ] 紧急联系人（`pages/profile/emergency`）
    - [ ] 联系人列表
    - [ ] 添加/编辑联系人
  - [ ] 我的收藏（`pages/profile/favorites`）
    - [ ] 收藏顾问列表

- [ ] **安全模块页面**
  - [ ] 紧急求助（`pages/security/help`）
    - [ ] 求助按钮
    - [ ] 紧急联系人展示
  - [ ] 投诉举报（`pages/security/report`）
    - [ ] 举报类型选择
    - [ ] 举报描述输入
    - [ ] 证据上传

- [ ] **其他页面**
  - [ ] 评价列表（`pages/review/list`）
  - [ ] 通知列表（`pages/notification/list`）
  - [ ] 错误页（`pages/common/error`）
  - [ ] 加载页（`pages/common/loading`）

#### 2.9.4 小程序页面路由文档

- [ ] **创建页面路由文档**
  - [ ] 创建 `docs/miniprogram-routes.md` 页面路由文档
  - [ ] 列出所有页面路径和功能说明
  - [ ] 说明页面跳转关系
  - [ ] 说明Tab配置

### Phase 2 检查清单

- [ ] 后端API接口已完成
- [ ] 用户可以完成微信登录
- [ ] 用户可以完善个人信息和实名认证
- [ ] 用户可以浏览和搜索顾问
- [ ] 用户可以发布需求
- [ ] 智能匹配算法可以正常工作
- [ ] 用户可以创建订单并完成支付（仅微信支付）
- [ ] 订单状态流转正常
- [ ] 退款功能正常（原路退回微信）
- [ ] 消费记录查询正常
- [ ] 定时任务可以正常执行
- [ ] 通知功能可以正常工作
- [ ] **小程序页面开发已完成**
- [ ] **小程序可以正常调用后端API**
- [ ] **小程序页面跳转正常**
- [ ] **小程序支付功能正常**

---

## Phase 3: 情感顾问端核心功能

> 目标：完成情感顾问端核心功能，包括入驻、接单、服务、收入等

### 3.1 顾问模块（`03-consultants`）

- [ ] **顾问入驻**
  - [ ] 申请入驻（`POST /consultants/apply`）
  - [ ] 提交基本信息、照片、视频
  - [ ] 上传视频自我介绍（必须现场录制）

- [ ] **实名认证**（顾问必须）
  - [ ] 提交实名认证（复用用户模块接口）
  - [ ] 验证身份证+人脸识别
  - [ ] 保存认证信息

- [ ] **培训考核**
  - [ ] 培训视频列表（`GET /consultants/training/videos`）
  - [ ] 在线考试（`POST /consultants/training/exam`）
  - [ ] 考核结果记录
  - [ ] 考核通过后才能接单
  - [ ] 实现培训课程表（`training_courses`）设计
  - [ ] 实现培训进度计算逻辑（完成度计算、是否可参加考试）

- [ ] **审核状态**
  - [ ] 查询审核状态（`GET /consultants/status`）
  - [ ] 审核通过/驳回逻辑（管理后台实现）
  - [ ] 实现面试结果处理API（管理后台：录入面试结果、评分、评语）
  - [ ] 实现面试录像存储和查看功能（存储位置、访问权限）

- [ ] **个人主页管理**
  - [ ] 更新基本信息（`PATCH /consultants/me`）
  - [ ] 上传照片墙（`POST /consultants/me/photos`）
  - [ ] 录制视频介绍（`POST /consultants/me/video`）
  - [ ] 设置服务类型和价格（`PATCH /consultants/me/services`）
  - [ ] 设置服务范围（`PATCH /consultants/me/service-areas`）
  - [ ] 设置在线状态（`PATCH /consultants/me/online-status`）

### 3.2 需求模块（顾问端）

- [ ] **需求大厅**
  - [ ] 查询需求大厅（`GET /demands/hall`）
  - [ ] 支持筛选（城市、类目、预算）
  - [ ] 支持排序（距离、预算、时间）

- [ ] **申请接单**
  - [ ] 申请接单（`POST /demands/:id/apply`）
  - [ ] 自定义报价和留言
  - [ ] 查询我的申请列表（`GET /demands/applications/my`）

- [ ] **系统推送**
  - [ ] 接收智能匹配推送的需求
  - [ ] 60秒内响应机制
  - [ ] 锁定需求逻辑
  - [ ] 实现需求锁定状态查询（`GET /demands/:id/lock-status`）
  - [ ] 实现锁定超时自动释放（定时任务）

### 3.3 订单模块（顾问端）

- [ ] **预约管理**
  - [ ] 查询预约列表（`GET /orders/consultant/pending`）
  - [ ] 接单（`POST /orders/:id/accept`）
  - [ ] 拒单（`POST /orders/:id/reject`）

- [ ] **订单管理**
  - [ ] 查询我的订单列表（`GET /orders/consultant/my`）
  - [ ] 查询订单详情（`GET /orders/:id`）
  - [ ] 服务开始打卡（`POST /orders/:id/start`）
  - [ ] 服务结束打卡（`POST /orders/:id/end`）

### 3.4 支付模块（顾问端）

> 重要说明：仅顾问有钱包功能，用于收入、待结算、提现。用户无钱包功能。

- [ ] **钱包管理（顾问端）**
  - [ ] 查询钱包信息（`GET /consultants/wallet`）
    - [ ] 已结算余额（balance）
    - [ ] 待结算金额（pendingSettlement）
    - [ ] 可用余额（availableBalance）
    - [ ] 累计收入和提现统计
  - [ ] 查询钱包流水（`GET /consultants/wallet/transactions`）
    - [ ] 支持筛选（收入待结算/结算到账/打赏收入/提现申请/退款扣除）
    - [ ] 支持分页查询
  - [ ] 收入明细查询

- [ ] **提现功能（顾问端）**
  - [ ] 申请提现（`POST /consultants/withdraw`）
  - [ ] 提现规则验证（7天待结算期，仅可用余额可提现）
  - [ ] 调用微信企业付款API
  - [ ] 提现审核流程（管理后台）
  - [ ] 查询提现记录（`GET /consultants/withdraws`）
  - [ ] 提现状态管理（待审核/已通过/已拒绝）

- [ ] **结算功能（顾问端）**
  - [ ] 订单完成后创建待结算记录（7天后自动结算）
  - [ ] 定时任务：每天0点结算7天前的待结算金额
  - [ ] 结算后更新钱包余额

### 3.5 通讯模块（`08-communication`）

- [ ] **售前咨询**
  - [ ] 腾讯云IM集成
  - [ ] 创建会话（`POST /conversations`）
  - [ ] 发送消息（`POST /conversations/:id/messages`）
  - [ ] 查询会话列表（`GET /conversations`）
  - [ ] 查询消息列表（`GET /conversations/:id/messages`）

- [ ] **订单会话**
  - [ ] 订单自动创建会话
  - [ ] 订单会话消息同步
  - [ ] 隐私号集成（虚拟号码）
  - [ ] 实现虚拟号码绑定接口（订单创建时自动绑定、绑定参数、返回结果）
  - [ ] 实现绑定失败处理逻辑（重试次数、重试间隔、失败通知）
  - [ ] 实现自动解绑定时任务（订单完成后48小时自动解绑，Cron表达式、解绑逻辑、解绑失败处理）

- [ ] **通话功能**（可选，MVP后可补）
  - [ ] 腾讯云IM音视频通话
  - [ ] 通话记录

### 3.6 微信小程序端开发（顾问端）（`miniprogram-partner`）

> 目标：完成微信小程序顾问端开发，包括入驻、工作台、需求大厅、订单管理、收入管理等  
> 前置依赖：Phase 1（基础架构）+ Phase 0.6（UI设计）+ Phase 3后端API

#### 3.6.1 顾问端页面开发

- [ ] **入驻模块页面**
  - [ ] 申请入驻（`pages/partner/apply`）
    - [ ] 基本信息填写
    - [ ] 照片上传（最多9张）
    - [ ] 视频录制（必须现场录制）
    - [ ] 实名认证
  - [ ] 审核状态（`pages/partner/status`）
    - [ ] 状态展示
    - [ ] 进度条
    - [ ] 驳回原因展示
  - [ ] 培训考核（`pages/partner/training`）
    - [ ] 培训视频列表
    - [ ] 视频播放
    - [ ] 进度记录
    - [ ] 考试入口

- [ ] **工作台页面**
  - [ ] 工作台首页（`pages/partner/workbench`）
    - [ ] 数据概览卡片
    - [ ] 快捷入口
    - [ ] 最近订单
    - [ ] 在线状态切换
  - [ ] 咨询管理（`pages/partner/consult`）
    - [ ] 咨询列表
    - [ ] 咨询回复

- [ ] **需求大厅页面**
  - [ ] 需求大厅（`pages/partner/hall`）
    - [ ] 筛选栏（城市、类目、状态）
    - [ ] 需求列表
    - [ ] 申请接单弹窗

- [ ] **订单管理页面**
  - [ ] 订单列表（`pages/partner/orders`）
    - [ ] 状态Tab切换
    - [ ] 订单卡片
    - [ ] 接单/拒单操作
  - [ ] 订单详情（`pages/partner/order-detail`）
    - [ ] 订单信息展示
    - [ ] 用户信息展示
    - [ ] 操作按钮（接单、开始服务、结束服务、确认完成）

- [ ] **收入管理页面**
  - [ ] 收入概览（`pages/partner/income`）
    - [ ] 收入统计卡片
    - [ ] 收入明细列表
    - [ ] 时间筛选
  - [ ] 提现管理（`pages/partner/withdraw`）
    - [ ] 待结算金额展示
    - [ ] 提现金额输入
    - [ ] 提现记录列表

- [ ] **管理模块页面**
  - [ ] 主页管理（`pages/partner/profile`）
    - [ ] 基本信息编辑
    - [ ] 照片墙管理
    - [ ] 视频介绍重新录制
  - [ ] 服务设置（`pages/partner/service`）
    - [ ] 服务类目列表
    - [ ] 价格设置
    - [ ] 时长范围设置
    - [ ] 服务半径设置
  - [ ] 评价管理（`pages/partner/reviews`）
    - [ ] 评价统计
    - [ ] 评价列表

#### 3.6.2 小程序页面路由文档更新

- [ ] **更新页面路由文档**
  - [ ] 在 `docs/miniprogram-routes.md` 中添加顾问端页面路由
  - [ ] 说明用户端和顾问端的切换逻辑
  - [ ] 说明Tab配置（顾问端5个Tab）

### Phase 3 检查清单

- [ ] 后端API接口已完成
- [ ] 顾问可以完成入驻申请
- [ ] 顾问可以完成实名认证和培训考核
- [ ] 顾问可以管理个人主页
- [ ] 顾问可以查看需求大厅并申请接单
- [ ] 顾问可以接收系统推送的需求
- [ ] 顾问可以接单和管理订单
- [ ] 顾问可以查看钱包信息（收入、待结算、余额）
- [ ] 顾问可以申请提现
- [ ] 提现审核流程正常
- [ ] 结算功能正常（7天待结算期）
- [ ] 顾问可以与用户进行售前咨询
- [ ] **顾问端小程序页面开发已完成**
- [ ] **顾问端小程序可以正常调用后端API**
- [ ] **顾问端小程序页面跳转正常**

---

## Phase 4: 管理后台

> 目标：完成管理后台核心功能，包括数据看板、用户管理、订单管理、顾问管理等

### 4.1 管理后台前端

> **技术选型：** [vue-vben-admin](https://github.com/vbenjs/vue-vben-admin) v5.x（Vue3 + Vite + TypeScript + Monorepo）

- [ ] **项目初始化**
  - [ ] 克隆 vue-vben-admin 到 `admin/` 目录
  - [ ] 使用默认版本（核心基于 Shadcn UI + Tailwind CSS，v5.x 主版本）
  - [ ] 配置环境变量（`.env.development`、`.env.production`）
  - [ ] 配置 API 地址（`VITE_GLOB_API_URL`）
  - [ ] 安装项目依赖（`pnpm install`）

- [ ] **权限集成**
  - [ ] 配置动态路由（基于后端权限接口）
  - [ ] 实现路由守卫（登录验证、权限验证）
  - [ ] 实现按钮级权限控制（`v-if` + 权限代码）
  - [ ] 集成权限管理 API（获取管理员权限列表）

- [ ] **API 集成**
  - [ ] 封装管理后台 API（`api/admin/` 目录）
  - [ ] 配置请求拦截器（Token 注入、错误处理）
  - [ ] 配置响应拦截器（统一错误处理、Token 刷新）
  - [ ] 对接后端接口（登录、数据看板、用户管理等）

- [ ] **页面开发**
  - [ ] 登录页面（使用 vue-vben-admin 登录模板）
  - [ ] 数据看板页面（集成图表组件，如 echarts）
  - [ ] 用户管理页面（列表、详情、封禁/解封）
  - [ ] 顾问管理页面（列表、详情、审核、封禁/解封）
  - [ ] 订单管理页面（列表、详情、取消、退款）
  - [ ] 投诉管理页面（列表、详情、处理）
  - [ ] 评价管理页面（列表、详情、审核）
  - [ ] 财务管理页面（交易流水、提现审核）
  - [ ] 系统配置页面（配置列表、更新配置）
  - [ ] 权限管理页面（权限列表、角色权限分配）
  - [ ] 数据分析页面（用户行为分析、业务数据报表）
  - [ ] 隐私审计页面（隐私访问日志）

### 4.2 管理后台后端（`12-admin`）

- [ ] **管理员认证**
  - [ ] 管理员登录接口（`POST /admin/auth/login`）
  - [ ] 管理员权限验证
  - [ ] 管理员信息查询（`GET /admin/auth/me`）
  - [ ] 细粒度权限管理（如需要：权限表设计、角色权限关联表、权限验证Guard）

- [ ] **数据看板**
  - [ ] 统计数据接口（`GET /admin/dashboard/stats`）
  - [ ] 用户增长趋势（`GET /admin/dashboard/users-growth`）
  - [ ] 订单统计（`GET /admin/dashboard/orders-stats`）
  - [ ] 收入统计（`GET /admin/dashboard/revenue-stats`）
  - [ ] 用户行为分析（用户行为分析表、行为统计API）
  - [ ] 业务数据报表（订单报表、收入报表、用户报表等）
  - [ ] 数据分析API（数据查询、数据导出、数据可视化）

- [ ] **用户管理**
  - [ ] 用户列表（`GET /admin/users`）
  - [ ] 用户详情（`GET /admin/users/:id`）
  - [ ] 用户状态管理（封禁/解封）
  - [ ] 用户实名认证审核

- [ ] **顾问管理**
  - [ ] 顾问列表（`GET /admin/consultants`）
  - [ ] 顾问详情（`GET /admin/consultants/:id`）
  - [ ] 顾问审核（通过/驳回）
  - [ ] 顾问状态管理（封禁/解封）
  - [ ] 顾问培训管理
  - [ ] 培训课程管理（创建、编辑、删除课程，`training_courses` 表管理）
  - [ ] 面试结果处理（录入面试结果、评分、评语，查看面试录像）

- [ ] **订单管理**
  - [ ] 订单列表（`GET /admin/orders`）
  - [ ] 订单详情（`GET /admin/orders/:id`）
  - [ ] 订单状态管理
  - [ ] 订单退款处理

- [ ] **需求管理**
  - [ ] 需求列表（`GET /admin/demands`）
  - [ ] 需求详情（`GET /admin/demands/:id`）
  - [ ] 需求状态管理

- [ ] **支付管理**
  - [ ] 支付记录列表（`GET /admin/payments`）
  - [ ] 退款记录列表（`GET /admin/payments/refunds`）
  - [ ] 提现审核（`POST /admin/payments/withdrawals/:id/approve`）

- [ ] **投诉举报管理**
  - [ ] 投诉列表（`GET /admin/complaints`）
  - [ ] 投诉处理（`POST /admin/complaints/:id/handle`）

- [ ] **评价管理**
  - [ ] 评价列表（`GET /admin/reviews`）
  - [ ] 评价详情（`GET /admin/reviews/:id`）
  - [ ] 评价审核接口（`POST /admin/reviews/:id/audit`）
  - [ ] 实现评价审核流程（通过/拒绝）
  - [ ] 实现评价审核后的评分更新
、`docs/modules/
- [ ] **系统配置管理**
  - [ ] 获取配置接口（`GET /admin/configs`）
  - [ ] 更新配置接口（`PATCH /admin/configs/:key`）
  - [ ] 系统配置项的枚举定义（配置Key列表、配置值类型、默认值）
  - [ ] 配置验证规则（配置值格式验证、范围验证）
  - [ ] 配置变更日志（记录配置变更历史、变更人、变更时间）

### 4.3 管理后台页面

- [ ] **数据看板页面**
  - [ ] 统计数据展示
  - [ ] 图表展示（使用 ECharts 或类似库）

- [ ] **用户管理页面**
  - [ ] 用户列表表格
  - [ ] 用户详情弹窗
  - [ ] 用户状态操作

- [ ] **顾问管理页面**
  - [ ] 顾问列表表格
  - [ ] 顾问详情弹窗
  - [ ] 顾问审核操作
  - [ ] 顾问状态管理

- [ ] **订单管理页面**
  - [ ] 订单列表表格
  - [ ] 订单详情弹窗
  - [ ] 订单状态操作

- [ ] **需求管理页面**
  - [ ] 需求列表表格
  - [ ] 需求详情弹窗

- [ ] **支付管理页面**
  - [ ] 支付记录表格
  - [ ] 退款记录表格
  - [ ] 提现审核操作

- [ ] **投诉管理页面**
  - [ ] 投诉列表表格
  - [ ] 投诉处理操作

### Phase 4 检查清单

- [ ] 管理员可以登录后台
- [ ] 数据看板可以正常显示统计数据
- [ ] 用户可以管理用户和顾问
- [ ] 用户可以审核顾问入驻申请
- [ ] 用户可以管理订单和需求
- [ ] 用户可以处理支付和提现
- [ ] 用户可以处理投诉举报

---

## Phase 5: 安全与风控

> 目标：完善安全功能，包括紧急求助、位置共享、投诉举报等

### 安全模块（`09-security`）

- [ ] **紧急求助**
  - [ ] 紧急求助接口（`POST /security/emergency`）
  - [ ] 发送紧急通知（短信+推送）
  - [ ] 通知紧急联系人
  - [ ] 记录求助日志
  - [ ] 实现运营人员响应接口（管理后台：查看SOS工单列表、处理SOS工单、更新处理状态）
  - [ ] 实现SOS工单处理流程API（接单、处理中、已处理、联系用户、联系110）
  - [ ] 实现报警到110的接口设计（如需要，可能需要对接第三方服务）

- [ ] **位置共享**
  - [ ] 位置上报接口（`POST /security/location`）
  - [ ] 位置查询接口（`GET /security/location/:orderId`）
  - [ ] 位置数据加密存储
  - [ ] 位置数据自动清理（服务结束后24小时）
  - [ ] 实现位置上报定时任务（每5分钟上报一次，Cron表达式、上报逻辑、客户端配合机制）
  - [ ] 实现位置数据清理定时任务（服务结束后24小时自动清理、清理逻辑）
  - [ ] 实现位置数据存储优化方案（数据归档、历史数据迁移、避免数据膨胀）

- [ ] **投诉举报**
  - [ ] 提交投诉（`POST /security/complaints`）
  - [ ] 查询投诉列表（`GET /security/complaints`）
  - [ ] 投诉处理（管理后台）

- [ ] **黑名单管理**
  - [ ] 添加黑名单（`POST /security/blacklist`）
  - [ ] 查询黑名单（`GET /security/blacklist`）
  - [ ] 移除黑名单（`DELETE /security/blacklist/:id`）

### 5.2 风控系统

- [ ] **信用分系统**
  - [ ] 信用分计算规则
  - [ ] 信用分更新逻辑（订单完成、评价、投诉等）
  - [ ] 信用分查询接口（`GET /users/:id/credit-score`）
  - [ ] 实现信用分恢复机制（订单完成每10单+1分、5星好评+2分、申诉成功恢复被扣分数）
  - [ ] 实现信用分扣减上限（最低0分）和加分上限（最高100分）
  - [ ] 实现信用分影响逻辑（<60限制接单，<40暂停服务，=0永久封禁）
  - [ ] 实现信用分变更日志记录（`credit_score_logs`表）

- [ ] **异常行为检测**
  - [ ] 订单异常检测（频繁取消、退款等）
  - [ ] 用户行为分析
  - [ ] 自动封禁机制

- [ ] **数据安全**
  - [ ] 敏感数据加密（手机号、身份证等，遵循00-shared.md 2.4规范）
  - [ ] 数据脱敏（日志脱敏、API响应脱敏，实现脱敏工具函数）
  - [ ] 数据备份策略（每日备份、备份保留30天、定期恢复测试）
  - [ ] 数据安全审计机制（敏感操作日志、访问日志记录）
 2.4
0

### 5.3 保险服务（可选）

- [ ] **保险集成**
  - [ ] 对接保险服务API
  - [ ] 订单自动投保
  - [ ] 保险理赔流程

### Phase 5 检查清单

- [ ] 紧急求助功能可以正常工作
- [ ] 位置共享功能可以正常工作
- [ ] 投诉举报功能可以正常工作
- [ ] 信用分系统可以正常计算和更新
- [ ] 敏感数据已加密存储
- [ ] 异常行为检测可以正常工作

---

## Phase 6: 测试与上线

> 目标：完成测试、优化、部署上线

### 6.1 测试

- [ ] **单元测试**
  - [ ] 核心业务逻辑单元测试
  - [ ] Service 层测试覆盖率 > 80%

- [ ] **集成测试**
  - [ ] API 接口集成测试
  - [ ] 数据库操作测试
  - [ ] 第三方服务集成测试

- [ ] **E2E 测试**
  - [ ] 核心业务流程 E2E 测试
  - [ ] 用户端完整流程测试
  - [ ] 顾问端完整流程测试

- [ ] **性能测试**
  - [ ] API 响应时间测试
  - [ ] 并发测试
  - [ ] 数据库查询优化

- [ ] **安全测试**
  - [ ] SQL 注入测试
  - [ ] XSS 攻击测试
  - [ ] 认证授权测试

### 6.2 优化

- [ ] **代码优化**
  - [ ] 代码审查
  - [ ] 性能优化
  - [ ] 代码重构（如有必要）

- [ ] **数据库优化**
  - [ ] 索引优化（审查所有表的索引设计，补充必要的复合索引和GIST索引）
  - [ ] 查询优化（使用EXPLAIN ANALYZE分析慢查询）
  - [ ] 慢查询分析（定期分析慢查询日志，优化索引策略）

- [ ] **缓存优化**
  - [ ] Redis 缓存策略优化
  - [ ] 缓存命中率分析

### 6.3 部署

- [ ] **生产环境准备**
  - [ ] 服务器环境配置
  - [ ] 数据库环境配置
  - [ ] Redis 环境配置
  - [ ] Nginx 配置

- [ ] **小程序发布**
  - [ ] 小程序代码审核
  - [ ] 小程序版本发布
  - [ ] 小程序体验版测试

- [ ] **后端部署**
  - [ ] Docker 镜像构建
  - [ ] 容器部署
  - [ ] 健康检查配置
  - [ ] 日志收集配置

- [ ] **管理后台部署**
  - [ ] 前端构建
  - [ ] 静态资源部署
  - [ ] CDN 配置

### 6.4 监控与运维

- [ ] **监控配置**
  - [ ] 应用监控（APM）
  - [ ] 错误监控（Sentry 等）
  - [ ] 日志监控
  - [ ] 性能监控

- [ ] **告警配置**
  - [ ] 错误告警
  - [ ] 性能告警
  - [ ] 业务指标告警

### Phase 6 检查清单

- [ ] 所有测试通过
- [ ] 性能指标达标
- [ ] 安全测试通过
- [ ] 生产环境部署完成
- [ ] 小程序已发布
- [ ] 监控告警已配置
- [ ] 文档已更新

---

## 开发注意事项

### 开发顺序建议

1. **严格按照阶段顺序**：每个阶段的前置依赖必须完成
2. **模块内部顺序**：先完成基础功能，再完成高级功能
3. **并行开发**：Phase 0.5 的外部申请应与 Phase 1 并行进行

### 代码规范

- 使用 TypeScript 严格模式
- 所有 API 接口必须参考 `docs/modules/` 中的模块文档
- 数据库设计必须参考 `docs/modules/` 中的数据库设计
- 遵循 `.cursorrules` 中的开发规范

### 文档同步

- 开发过程中如发现文档问题，及时更新文档
- 重大变更需在文档末尾记录版本历史
- 确保 PRD、API、数据库三处文档保持一致

### 测试要求

- 每个模块开发完成后，必须进行单元测试
- 关键业务流程必须进行集成测试
- 上线前必须完成 E2E 测试

### 版本管理

- 使用 Git 进行版本管理
- 遵循 Git Flow 工作流
- 提交信息遵循规范（参考 Commitlint 配置）

---

## 更新日志

| 日期 | 版本 | 更新内容 |
|------|------|----------|
| 2026-01-15 | v1.7 | 文档审查报告完善完成，所有缺失功能和优化建议已完善 |
| 2026-01-15 | v1.6 | 完善优化建议部分，补充实施建议和开发任务 |
| 2026-01-15 | v1.5 | 冗余问题文档修复完成，功能统一到对应模块 |

---

> 提示：本开发计划会根据实际开发进度动态调整，建议定期更新进度
