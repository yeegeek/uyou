# UYOU 项目开发规范

> 🤖 **AI助手规则**：本文档用于指导AI助手理解项目结构和文档组织方式

## 文档结构

本项目文档已按业务模块重组，每个模块包含PRD、API、数据库设计三部分：

- **项目入口**：
  - `README.md` - 项目简介、工程进度、文件索引、AI使用说明
  - `todo.md` - 详细的开发计划和任务清单

- **模块化文档**：`docs/modules/` - 按业务模块组织（14个模块）
  - 每个模块文档包含：PRD + API + Database 三部分
  - 推荐使用模块化文档，一个文件包含完整信息
  - 全局搜索时，AI可以同时搜索多个模块文档（14个文件，约6000行，在上下文范围内）

- **UI设计与小程序文档**：`docs/` - UI设计规范和小程序路由文档
  - `ui-design.md` - UI设计规范（设计系统、组件库、页面布局说明）
  - `miniprogram-routes.md` - 小程序页面路由文档（页面路径、Tab配置、跳转关系）
  - `ui-design/GUIDE.md` - UI设计实施指南

**重要**：
- 新对话开始时，优先查看 `README.md` 了解项目状态
- 开发时使用模块化文档（`docs/modules/`），按需加载相关模块
- UI设计时参考 `docs/ui-design.md` 和 `docs/miniprogram-routes.md`

## 业务模块映射

当用户询问或开发功能时，**自动查找相关模块文档**：

1. **订单相关** → `docs/modules/04-orders.md`
2. **用户相关** → `docs/modules/01-users.md`
3. **支付相关** → `docs/modules/05-payments.md`
4. **顾问相关** → `docs/modules/03-consultants.md`
5. **需求匹配相关** → `docs/modules/06-demands.md`
6. **认证相关** → `docs/modules/02-auth.md`
7. **评价相关** → `docs/modules/07-reviews.md`
8. **安全相关** → `docs/modules/09-security.md`
9. **通讯相关** → `docs/modules/08-communication.md`
10. **营销相关** → `docs/modules/10-marketing.md`
11. **通知相关** → `docs/modules/11-notifications.md`
12. **管理后台相关** → `docs/modules/12-admin.md`
13. **发现相关** → `docs/modules/13-discovery.md`
14. **共享规范** → `docs/modules/00-shared.md`（API规范、数据库设计原则）
15. **UI设计相关** → `docs/ui-design.md`（设计规范、组件库、页面布局）
16. **小程序路由相关** → `docs/miniprogram-routes.md`（页面路径、Tab配置、跳转关系）

## AI助手行为规范

### 自动检索策略

1. **新对话开始**：如果用户没有明确指定，建议先查看 `README.md` 了解项目状态
2. **语义搜索**：根据用户问题中的关键词（如"订单"、"支付"、"用户"），自动搜索相关模块文档
3. **代码上下文**：当用户打开代码文件时，根据文件路径推断相关文档（如 `orders.service.ts` → 订单相关文档）
4. **精确引用**：用户使用 `@文件名` 时，只加载该文件，不加载其他无关内容
5. **开发任务**：用户询问开发进度或下一步任务时，查看 `todo.md`
6. **UI设计相关**：用户询问UI设计、页面布局、组件设计时，自动搜索 `docs/ui-design.md`
7. **小程序路由相关**：用户询问小程序页面路径、Tab配置、页面跳转时，自动搜索 `docs/miniprogram-routes.md`

### 文档加载原则

- ✅ **新对话开始**：优先查看 `README.md` 了解项目状态
- ✅ **优先加载模块化文档**（`docs/modules/`，每个模块~300-500行，包含PRD+API+DB）
- ✅ **按需加载**：只加载与当前问题相关的模块
- ✅ **全局搜索**：可以同时搜索多个模块文档（14个文件，约6000行，在上下文范围内）
- ✅ **开发任务**：查看 `todo.md` 了解开发计划和当前阶段任务
- ✅ **UI设计**：UI设计相关问题加载 `docs/ui-design.md` 和 `docs/miniprogram-routes.md`

### 回答规范

1. **引用文档时**：明确说明引用了哪个文档模块
   ```
   根据 docs/modules/04-orders.md 中的定义...
   ```

2. **跨模块查询**：如果涉及多个模块，分别引用
   ```
   根据 docs/modules/04-orders.md 和 docs/modules/05-payments.md...
   ```

3. **找不到文档时**：建议用户查看 `README.md` 的文件索引或明确指定

## 代码开发规范

### 开发新功能时

1. **自动检索相关文档**：根据功能名称自动找到对应模块文档
2. **确保一致性**：确保API、数据库、PRD三处定义一致（都在同一个模块文档中）
3. **遵循规范**：严格按照文档中的枚举值、字段名、接口规范实现

### 修改现有功能时

1. **先查看文档**：自动检索相关文档模块
2. **同步更新**：修改代码后，提醒用户同步更新文档（如需要）
3. **版本记录**：重大变更需在文档末尾记录版本历史

## 文档引用规范

- **路径格式**：使用相对路径 `docs/modules/04-orders.md`
- **优先模块化文档**：使用模块化文档（`docs/modules/`），一个文件包含完整信息
- **全局搜索**：可以同时搜索多个模块文档，AI语义搜索支持跨文件搜索

## 常见问题处理

### 用户问"订单状态有哪些值？"

**AI应**：
1. 自动搜索订单相关模块文档
2. 找到 `docs/modules/04-orders.md` 中的状态枚举（API部分和Database部分都有）
3. 返回完整的枚举列表

### 用户问"如何实现订单创建？"

**AI应**：
1. 自动检索：`docs/modules/04-orders.md`（包含PRD、API、数据库三部分）
2. 基于该模块文档提供实现方案
3. 确保API、数据库、业务流程一致（都在同一个文件中）

### 用户打开代码文件问问题

**AI应**：
1. 根据代码文件路径推断相关文档
2. 自动加载相关文档模块
3. 基于文档和代码上下文回答问题

### 用户开始新对话或询问项目状态

**AI应**：
1. 建议查看 `README.md` 了解项目概览和当前状态
2. 查看 `todo.md` 了解开发计划和下一步任务
3. 根据用户具体需求，再加载相关模块文档

### 用户询问UI设计相关问题

**AI应**：
1. 自动搜索 `docs/ui-design.md`（设计规范、组件库、页面布局说明）
2. 如果涉及页面路由，同时搜索 `docs/miniprogram-routes.md`
3. 如果涉及效果图生成，参考 `docs/ui-design/GUIDE.md`

### 用户询问小程序页面路径或路由

**AI应**：
1. 自动搜索 `docs/miniprogram-routes.md`（页面路径、Tab配置、跳转关系）
2. 如果涉及页面设计，同时搜索 `docs/ui-design.md` 中的页面布局说明
