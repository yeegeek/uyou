# UYOU æ— å¿§é™ªä¼´ - å¼€å‘æ€»ç»“æŠ¥å‘Š

> æœ¬æ–‡æ¡£æ€»ç»“äº† UYOU é¡¹ç›® Phase 1 å’Œ Phase 2 çš„å¼€å‘æˆæœ

---

## é¡¹ç›®æ¦‚å†µ

**é¡¹ç›®åç§°**ï¼šUYOU æ— å¿§é™ªä¼´  
**é¡¹ç›®ç±»å‹**ï¼šC2C æƒ…æ„Ÿé™ªä¼´æ’®åˆå¹³å°  
**æŠ€æœ¯æ ˆ**ï¼šNestJS + PostgreSQL + Redis + Prisma ORM + TypeScript  
**å¼€å‘é˜¶æ®µ**ï¼šPhase 1ï¼ˆåŸºç¡€æ¶æ„ï¼‰âœ… + Phase 2ï¼ˆæ ¸å¿ƒåŠŸèƒ½ï¼‰âœ…  
**å¼€å‘æ—¶é—´**ï¼š2026-01-18  

---

## å·²å®Œæˆæ¨¡å—

### Phase 1: åŸºç¡€æ¶æ„æ­å»º âœ…

#### 1.1 é¡¹ç›®åˆå§‹åŒ–
- âœ… NestJS é¡¹ç›®æ­å»º
- âœ… TypeScript ä¸¥æ ¼æ¨¡å¼é…ç½®
- âœ… ESLint + Prettier ä»£ç è§„èŒƒ
- âœ… ç¯å¢ƒå˜é‡ç®¡ç†ï¼ˆ.envï¼‰
- âœ… Docker Compose é…ç½®ï¼ˆPostgreSQL + Redisï¼‰

#### 1.2 æ•°æ®åº“è®¾è®¡
- âœ… å®Œæ•´çš„ Prisma Schemaï¼ˆ15+ æ•°æ®æ¨¡å‹ï¼‰
- âœ… ç”¨æˆ·æ¨¡å—æ•°æ®è¡¨ï¼ˆusers, user_verifications, user_emergency_contacts, user_favorites, user_blocksï¼‰
- âœ… é¡¾é—®æ¨¡å—æ•°æ®è¡¨ï¼ˆconsultants, consultant_services, consultant_wallet_transactions, consultant_withdrawalsï¼‰
- âœ… éœ€æ±‚æ¨¡å—æ•°æ®è¡¨ï¼ˆdemands, demand_applications, demand_locksï¼‰
- âœ… è®¢å•æ¨¡å—æ•°æ®è¡¨ï¼ˆordersï¼‰
- âœ… æ”¯ä»˜æ¨¡å—æ•°æ®è¡¨ï¼ˆpayments, couponsï¼‰
- âœ… è¯„ä»·æ¨¡å—æ•°æ®è¡¨ï¼ˆreviews, review_tagsï¼‰
- âœ… é€šè®¯æ¨¡å—æ•°æ®è¡¨ï¼ˆconversations, conversation_participants, messagesï¼‰
- âœ… å®‰å…¨æ¨¡å—æ•°æ®è¡¨ï¼ˆemergency_helps, location_shares, complaintsï¼‰
- âœ… é€šçŸ¥æ¨¡å—æ•°æ®è¡¨ï¼ˆnotificationsï¼‰
- âœ… ç®¡ç†åå°æ•°æ®è¡¨ï¼ˆadmins, system_configsï¼‰
- âœ… å…±äº«æ•°æ®è¡¨ï¼ˆcities, service_categoriesï¼‰

#### 1.3 å…¬å…±æ¨¡å—ï¼ˆCommon Moduleï¼‰
- âœ… å¼‚å¸¸è¿‡æ»¤å™¨ï¼ˆHttpExceptionFilter, AllExceptionsFilterï¼‰
- âœ… å“åº”æ‹¦æˆªå™¨ï¼ˆResponseInterceptorï¼Œæ”¯æŒ Debug æ¨¡å¼ï¼‰
- âœ… éªŒè¯ç®¡é“ï¼ˆValidationPipeï¼‰
- âœ… ç”¨æˆ·è£…é¥°å™¨ï¼ˆ@User()ï¼‰
- âœ… Public è£…é¥°å™¨ï¼ˆ@Public()ï¼‰
- âœ… é”™è¯¯ç å¸¸é‡å®šä¹‰
- âœ… åˆ†é¡µå·¥å…·ç±»ï¼ˆPaginationDtoï¼‰

#### 1.4 é…ç½®æ¨¡å—ï¼ˆConfig Moduleï¼‰
- âœ… ç¯å¢ƒå˜é‡éªŒè¯ï¼ˆJoiï¼‰
- âœ… æ•°æ®åº“é…ç½®
- âœ… Redis é…ç½®
- âœ… JWT é…ç½®
- âœ… å¾®ä¿¡é…ç½®
- âœ… è…¾è®¯äº‘é…ç½®

#### 1.5 æ•°æ®åº“æ¨¡å—ï¼ˆDatabase Moduleï¼‰
- âœ… Prisma Service
- âœ… æ•°æ®åº“è¿æ¥ç®¡ç†
- âœ… è¿æ¥æ± é…ç½®

#### 1.6 è®¤è¯æ¨¡å—ï¼ˆAuth Moduleï¼‰
- âœ… JWT è®¤è¯ç­–ç•¥ï¼ˆJwtStrategyï¼‰
- âœ… JWT è®¤è¯å®ˆå«ï¼ˆJwtAuthGuardï¼‰
- âœ… Token ç”Ÿæˆå’ŒéªŒè¯
- âœ… Token åˆ·æ–°æœºåˆ¶
- âœ… å¾®ä¿¡ç™»å½•æ¥å£ï¼ˆå¾…é›†æˆå¾®ä¿¡ APIï¼‰
- âœ… æ‰‹æœºå·ç»‘å®šæ¥å£ï¼ˆå¾…é›†æˆå¾®ä¿¡ APIï¼‰

#### 1.7 å¼€å‘ç¯å¢ƒ
- âœ… Swagger/OpenAPI æ–‡æ¡£
- âœ… æ¥å£é™æµï¼ˆ@nestjs/throttlerï¼‰
- âœ… çƒ­é‡è½½é…ç½®

---

### Phase 2: ç”¨æˆ·ç«¯æ ¸å¿ƒåŠŸèƒ½ âœ…

#### 2.1 è®¤è¯æ¨¡å—ï¼ˆAuth Moduleï¼‰
**API ç«¯ç‚¹ï¼š**
- âœ… `POST /auth/wechat/login` - å¾®ä¿¡ç™»å½•
- âœ… `POST /auth/wechat/bind-phone` - æ‰‹æœºå·ç»‘å®š
- âœ… `POST /auth/refresh` - Token åˆ·æ–°

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- JWT Token ç”Ÿæˆå’ŒéªŒè¯
- Refresh Token æœºåˆ¶
- ç”¨æˆ·è‡ªåŠ¨åˆ›å»º/æ›´æ–°
- å¾…é›†æˆï¼šå¾®ä¿¡ OpenID/UnionID è·å–

#### 2.2 ç”¨æˆ·æ¨¡å—ï¼ˆUsers Moduleï¼‰
**API ç«¯ç‚¹ï¼š**
- âœ… `GET /users/me` - è·å–ç”¨æˆ·ä¿¡æ¯
- âœ… `PATCH /users/me` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯
- âœ… `POST /users/verification` - æäº¤å®åè®¤è¯
- âœ… `GET /users/verification/status` - æŸ¥è¯¢è®¤è¯çŠ¶æ€
- âœ… `POST /users/emergency-contacts` - æ·»åŠ ç´§æ€¥è”ç³»äºº
- âœ… `GET /users/emergency-contacts` - æŸ¥è¯¢ç´§æ€¥è”ç³»äºº
- âœ… `DELETE /users/emergency-contacts/:id` - åˆ é™¤ç´§æ€¥è”ç³»äºº
- âœ… `POST /users/favorites` - æ”¶è—ç”¨æˆ·/é¡¾é—®
- âœ… `GET /users/favorites` - æŸ¥è¯¢æ”¶è—åˆ—è¡¨
- âœ… `DELETE /users/favorites/:id` - å–æ¶ˆæ”¶è—
- âœ… `POST /users/blocks` - å±è”½ç”¨æˆ·/é¡¾é—®
- âœ… `GET /users/blocks` - æŸ¥è¯¢å±è”½åˆ—è¡¨
- âœ… `DELETE /users/blocks/:id` - å–æ¶ˆå±è”½

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- ç”¨æˆ·ä¿¡æ¯ç®¡ç†ï¼ˆæ˜µç§°ã€å¤´åƒã€æ€§åˆ«ã€ç”Ÿæ—¥ã€ç®€ä»‹ã€åŸå¸‚ï¼‰
- å®åè®¤è¯æµç¨‹ï¼ˆå¾…é›†æˆèº«ä»½è¯OCR + äººè„¸è¯†åˆ«ï¼‰
- ç´§æ€¥è”ç³»äººç®¡ç†ï¼ˆæ”¯æŒä¸»è¦è”ç³»äººæ ‡è®°ï¼‰
- æ”¶è—ç®¡ç†ï¼ˆæ™®é€šæ”¶è—/ç‰¹åˆ«å…³æ³¨ï¼‰
- å±è”½ç®¡ç†ï¼ˆè‡ªåŠ¨ä»æ”¶è—åˆ—è¡¨ç§»é™¤ï¼‰
- æ¸¸æ ‡åˆ†é¡µ
- æ•°æ®éªŒè¯å’Œä¸šåŠ¡è§„åˆ™æ£€æŸ¥

#### 2.3 å‘ç°æ¨¡å—ï¼ˆDiscovery Moduleï¼‰
**API ç«¯ç‚¹ï¼š**
- âœ… `GET /discovery/cities` - è·å–åŸå¸‚åˆ—è¡¨
- âœ… `GET /discovery/categories` - è·å–æœåŠ¡ç±»ç›®åˆ—è¡¨
- âœ… `GET /discovery/categories/:id` - è·å–ç±»ç›®è¯¦æƒ…
- âœ… `GET /discovery/consultants/recommended` - è·å–æ¨èé¡¾é—®åˆ—è¡¨
- âœ… `GET /discovery/consultants/search` - æœç´¢é¡¾é—®
- âœ… `GET /discovery/consultants/:id` - è·å–é¡¾é—®è¯¦æƒ…ï¼ˆéœ€ç™»å½•ï¼‰
- âœ… `GET /discovery/consultants/:id/public` - è·å–é¡¾é—®è¯¦æƒ…ï¼ˆå…¬å¼€è®¿é—®ï¼‰

**æ¨èç®—æ³•ï¼š**
```
æ€»åˆ† = è·ç¦»åˆ†Ã—40% + è¯„åˆ†åˆ†Ã—30% + åå¥½åˆ†Ã—20% + æ´»è·ƒåˆ†Ã—10%

- è·ç¦»åˆ†ï¼ˆ0-100ï¼‰ï¼šåŸºäºç”¨æˆ·ä½ç½®ï¼Œè·ç¦»è¶Šè¿‘åˆ†æ•°è¶Šé«˜
- è¯„åˆ†åˆ†ï¼ˆ0-100ï¼‰ï¼šåŸºäºé¡¾é—®å¹³å‡è¯„åˆ†ï¼ˆ0-5æ˜Ÿï¼‰
- åå¥½åˆ†ï¼ˆ0-100ï¼‰ï¼šæ¨èåœºæ™¯ä¸‹é»˜è®¤50åˆ†
- æ´»è·ƒåˆ†ï¼ˆ0-100ï¼‰ï¼šåŸºäºæœ€ååœ¨çº¿æ—¶é—´
```

**ç¼“å­˜ç­–ç•¥ï¼š**
- ç¼“å­˜Keyï¼š`consultant:recommended:{cityId}:{categoryId}:{page}:{pageSize}`
- è¿‡æœŸæ—¶é—´ï¼š5åˆ†é’Ÿï¼ˆ300ç§’ï¼‰
- ç¼“å­˜èŒƒå›´ï¼šä»…ç¼“å­˜å‰3é¡µ
- æ›´æ–°ç­–ç•¥ï¼šå¤±æ•ˆæ›´æ–° + å®šæ—¶æ›´æ–°

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- åŸå¸‚å’Œç±»ç›®ç®¡ç†
- é¡¾é—®æ¨èç®—æ³•ï¼ˆå¤šç»´åº¦è¯„åˆ†ï¼‰
- é¡¾é—®æœç´¢ï¼ˆæ”¯æŒåŸå¸‚ã€ç±»ç›®ã€æ€§åˆ«ã€å¹´é¾„ã€ä»·æ ¼ç­›é€‰ï¼‰
- é¡¾é—®è¯¦æƒ…ï¼ˆåŒ…å«æœåŠ¡ã€è¯„ä»·ã€æ”¶è—/å±è”½çŠ¶æ€ï¼‰
- å¤šç§æ’åºæ–¹å¼ï¼ˆè¯„åˆ†ã€è®¢å•æ•°ã€è·ç¦»ï¼‰
- Redis ç¼“å­˜ä¼˜åŒ–

#### 2.4 éœ€æ±‚æ¨¡å—ï¼ˆDemands Moduleï¼‰
**API ç«¯ç‚¹ï¼š**
- âœ… `POST /demands` - å‘å¸ƒéœ€æ±‚
- âœ… `GET /demands/my` - è·å–æˆ‘çš„éœ€æ±‚åˆ—è¡¨
- âœ… `GET /demands/:id` - è·å–éœ€æ±‚è¯¦æƒ…
- âœ… `GET /demands/:id/applications` - è·å–ç”³è¯·åˆ—è¡¨
- âœ… `POST /demands/:id/select-consultant` - é€‰æ‹©é¡¾é—®
- âœ… `POST /demands/:id/cancel` - å–æ¶ˆéœ€æ±‚
- âœ… `GET /demands/:id/lock-status` - æŸ¥è¯¢é”å®šçŠ¶æ€

**æ™ºèƒ½åŒ¹é…ç®—æ³•ï¼š**
```
æ€»åˆ† = è·ç¦»åˆ†Ã—40% + è¯„åˆ†åˆ†Ã—30% + åå¥½åˆ†Ã—20% + æ´»è·ƒåˆ†Ã—10%

åŒ¹é…æµç¨‹ï¼š
1. ç­›é€‰ï¼šåŸå¸‚ç›¸åŒ + æœåŠ¡ç±»ç›®å¯ç”¨ + çŠ¶æ€æ­£å¸¸
2. æ’é™¤ï¼šé»‘åå•å…³ç³» + ä¿¡ç”¨åˆ†<60
3. è¯„åˆ†ï¼šæŒ‰å…¬å¼è®¡ç®—æ€»åˆ†
4. æ’åºï¼šå–TOP 10æ¨é€
5. é”å®šï¼š60ç§’é”å®šæœŸ
```

**60ç§’é”å®šæœºåˆ¶ï¼š**
- æ¨é€ç»™TOP 10é¡¾é—®åé”å®šéœ€æ±‚
- é”å®šæœŸé—´å…¶ä»–é¡¾é—®ä¸å¯ç”³è¯·
- 60ç§’å†…æœ‰é¡¾é—®å“åº” â†’ çŠ¶æ€è½¬ä¸º matched
- 60ç§’å†…æ— é¡¾é—®å“åº” â†’ é‡Šæ”¾åˆ°éœ€æ±‚å¤§å…

**éœ€æ±‚çŠ¶æ€æµè½¬ï¼š**
```
pending â†’ matching â†’ locked â†’ matched â†’ confirmed | cancelled | expired
```

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- éœ€æ±‚å‘å¸ƒå’Œå‚æ•°éªŒè¯
- æ™ºèƒ½åŒ¹é…ç®—æ³•ï¼ˆå¤ç”¨æ¨èç®—æ³•ï¼‰
- 60ç§’é”å®šæœºåˆ¶
- éœ€æ±‚ç®¡ç†ï¼ˆæŸ¥è¯¢åˆ—è¡¨ã€è¯¦æƒ…ã€ç”³è¯·åˆ—è¡¨ï¼‰
- é€‰æ‹©é¡¾é—®å’Œå–æ¶ˆéœ€æ±‚
- éœ€æ±‚çŠ¶æ€è‡ªåŠ¨æµè½¬
- é”å®šè¶…æ—¶å¤„ç†ï¼ˆsetTimeoutï¼‰

#### 2.5 è®¢å•æ¨¡å—ï¼ˆOrders Moduleï¼‰
**API ç«¯ç‚¹ï¼š**
- âœ… `GET /orders` - è·å–è®¢å•åˆ—è¡¨
- âœ… `GET /orders/:id` - è·å–è®¢å•è¯¦æƒ…
- âœ… `POST /orders/:id/accept` - é¡¾é—®æ¥å•
- âœ… `POST /orders/:id/reject` - é¡¾é—®æ‹’å•
- âœ… `POST /orders/:id/cancel` - å–æ¶ˆè®¢å•
- âœ… `POST /orders/:id/start` - å¼€å§‹æœåŠ¡
- âœ… `POST /orders/:id/complete` - ç»“æŸæœåŠ¡
- âœ… `POST /orders/:id/confirm` - ç¡®è®¤å®Œæˆ

**è®¢å•çŠ¶æ€æœºï¼š**
```
pending_accept â†’ pending_payment â†’ paid â†’ in_progress â†’ pending_confirm â†’ completed
                                                                      â†“
                                                                  cancelled
                                                                      â†“
                                                                  expired
```

**é˜¶æ¢¯é€€æ¬¾è§„åˆ™ï¼š**

**ç”¨æˆ·å–æ¶ˆè®¢å•ï¼š**
- 24å°æ—¶ä»¥ä¸Šï¼šé€€æ¬¾100%
- 12-24å°æ—¶ï¼šé€€æ¬¾50%
- 12å°æ—¶å†…ï¼šä¸é€€æ¬¾
- æœåŠ¡è¿›è¡Œä¸­ï¼šæŒ‰å·²æœåŠ¡æ—¶é•¿æ¯”ä¾‹æ‰£é™¤

**é¡¾é—®å–æ¶ˆè®¢å•ï¼š**
- 24å°æ—¶ä»¥ä¸Šï¼šé€€æ¬¾100%ï¼Œæ‰£ä¿¡ç”¨åˆ†5åˆ†
- 12-24å°æ—¶ï¼šé€€æ¬¾100%ï¼Œæ‰£ä¿¡ç”¨åˆ†10åˆ†
- 12å°æ—¶å†…ï¼šé€€æ¬¾100%ï¼Œæ‰£ä¿¡ç”¨åˆ†20åˆ†
- æœåŠ¡è¿›è¡Œä¸­ï¼šé€€æ¬¾100%ï¼Œæ‰£ä¿¡ç”¨åˆ†30åˆ†

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- è®¢å•åˆ—è¡¨å’Œè¯¦æƒ…æŸ¥è¯¢ï¼ˆæ”¯æŒç”¨æˆ·ç«¯å’Œé¡¾é—®ç«¯ï¼‰
- é¡¾é—®æ¥å•/æ‹’å•é€»è¾‘
- è®¢å•å–æ¶ˆå’Œé˜¶æ¢¯é€€æ¬¾
- æœåŠ¡æµç¨‹ï¼ˆå¼€å§‹æœåŠ¡ã€ç»“æŸæœåŠ¡ã€ç¡®è®¤å®Œæˆï¼‰
- è®¢å•çŠ¶æ€æœºï¼ˆ8ä¸ªçŠ¶æ€ï¼‰
- é€€æ¬¾é‡‘é¢è‡ªåŠ¨è®¡ç®—
- ä¿¡ç”¨åˆ†æ‰£é™¤ï¼ˆé¡¾é—®å–æ¶ˆè®¢å•ï¼‰
- éœ€æ±‚çŠ¶æ€å›é€€é€»è¾‘

#### 2.6 æ”¯ä»˜æ¨¡å—ï¼ˆPayments Moduleï¼‰
**çŠ¶æ€ï¼š** ğŸ”„ å¾…é›†æˆï¼ˆéœ€è¦å¾®ä¿¡æ”¯ä»˜APIï¼‰

**è®¡åˆ’åŠŸèƒ½ï¼š**
- å¾®ä¿¡æ”¯ä»˜é›†æˆ
- æ”¯ä»˜è®¢å•åˆ›å»º
- æ”¯ä»˜å›è°ƒå¤„ç†
- é€€æ¬¾å¤„ç†
- ä¼˜æƒ åˆ¸ä½¿ç”¨
- æ¶ˆè´¹è®°å½•æŸ¥è¯¢

#### 2.7 é€šçŸ¥æ¨¡å—ï¼ˆNotifications Moduleï¼‰
**çŠ¶æ€ï¼š** ğŸ”„ å¾…å®ç°ï¼ˆéœ€è¦æ¶ˆæ¯é˜Ÿåˆ—ï¼‰

**è®¡åˆ’åŠŸèƒ½ï¼š**
- ç³»ç»Ÿé€šçŸ¥
- æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆBull + Redisï¼‰
- æ¨é€é›†æˆï¼ˆå¾®ä¿¡å°ç¨‹åºè®¢é˜…æ¶ˆæ¯ï¼‰

#### 2.8 è¯„ä»·æ¨¡å—ï¼ˆReviews Moduleï¼‰
**API ç«¯ç‚¹ï¼š**
- âœ… `POST /reviews` - ç”¨æˆ·è¯„ä»·é¡¾é—®
- âœ… `POST /reviews/consultant` - é¡¾é—®è¯„ä»·ç”¨æˆ·
- âœ… `GET /reviews` - è·å–è¯„ä»·åˆ—è¡¨
- âœ… `GET /reviews/tags` - è·å–è¯„ä»·æ ‡ç­¾
- âœ… `DELETE /reviews/:id` - åˆ é™¤è¯„ä»·
- âœ… `POST /reviews/tips` - æ‰“èµé¡¾é—®
- âœ… `POST /reviews/:id/audit` - å®¡æ ¸è¯„ä»·ï¼ˆç®¡ç†å‘˜ï¼‰

**åŠŸèƒ½ç‰¹æ€§ï¼š**
- åŒå‘è¯„ä»·ç³»ç»Ÿï¼ˆç”¨æˆ·è¯„ä»·é¡¾é—® + é¡¾é—®è¯„ä»·ç”¨æˆ·ï¼‰
- è¯„ä»·å®¡æ ¸æµç¨‹ï¼ˆå¾…å®¡æ ¸/æ˜¾ç¤º/å®¡æ ¸æ‹’ç»ï¼‰
- è¯„åˆ†è‡ªåŠ¨è®¡ç®—å’Œæ›´æ–°
- è½¯åˆ é™¤æ”¯æŒ
- åŒ¿åè¯„ä»·æ”¯æŒ
- æ‰“èµåŠŸèƒ½ï¼ˆéœ€5æ˜Ÿå¥½è¯„ï¼‰
- è¯„ä»·æ ‡ç­¾ç³»ç»Ÿ
- è¯„ä»·å›å¤åŠŸèƒ½

---

## æŠ€æœ¯å®ç°äº®ç‚¹

### 1. æ™ºèƒ½æ¨èå’ŒåŒ¹é…ç®—æ³•
- å¤šç»´åº¦è¯„åˆ†ç³»ç»Ÿï¼ˆè·ç¦»ã€è¯„åˆ†ã€åå¥½ã€æ´»è·ƒåº¦ï¼‰
- åŠ æƒå¹³å‡ç®—æ³•ï¼ˆ40% + 30% + 20% + 10%ï¼‰
- å¯æ‰©å±•çš„è¯„åˆ†ä½“ç³»
- å¤ç”¨æ¨èç®—æ³•åˆ°éœ€æ±‚åŒ¹é…

### 2. 60ç§’é”å®šæœºåˆ¶
- éœ€æ±‚é”å®šè¡¨ï¼ˆdemand_locksï¼‰
- é”å®šçŠ¶æ€ç®¡ç†ï¼ˆé”å®šä¸­/å·²å“åº”/å·²è¶…æ—¶ï¼‰
- è‡ªåŠ¨è¶…æ—¶å¤„ç†ï¼ˆsetTimeoutï¼‰
- çŠ¶æ€è‡ªåŠ¨æµè½¬

### 3. é˜¶æ¢¯é€€æ¬¾ç³»ç»Ÿ
- åŸºäºæ—¶é—´çš„é€€æ¬¾æ¯”ä¾‹è®¡ç®—
- åŸºäºæœåŠ¡è¿›åº¦çš„é€€æ¬¾è®¡ç®—
- ç”¨æˆ·å–æ¶ˆ vs é¡¾é—®å–æ¶ˆå·®å¼‚åŒ–å¤„ç†
- ä¿¡ç”¨åˆ†è‡ªåŠ¨æ‰£é™¤

### 4. ç¼“å­˜ä¼˜åŒ–
- Redis ç¼“å­˜æ¨èç»“æœï¼ˆ5åˆ†é’Ÿè¿‡æœŸï¼‰
- ä»…ç¼“å­˜å‰3é¡µï¼ˆå‡å°‘ç¼“å­˜ç©ºé—´ï¼‰
- ç¼“å­˜å¤±æ•ˆç­–ç•¥
- ç¼“å­˜Keyè®¾è®¡åˆç†

### 5. æ•°æ®åº“è®¾è®¡
- å®Œæ•´çš„ Prisma Schema
- åˆç†çš„ç´¢å¼•è®¾è®¡
- è½¯åˆ é™¤æ”¯æŒ
- å…³è”æŸ¥è¯¢ä¼˜åŒ–ï¼ˆincludeï¼‰
- æ¸¸æ ‡åˆ†é¡µå®ç°

### 6. ä»£ç è´¨é‡
- TypeScript ä¸¥æ ¼æ¨¡å¼
- å®Œæ•´çš„ DTOs å’ŒéªŒè¯è§„åˆ™
- ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
- ç»Ÿä¸€çš„å“åº”æ ¼å¼
- Swagger API æ–‡æ¡£
- æ¨¡å—åŒ–è®¾è®¡

---

## API ç»Ÿè®¡

### å·²å®ç°çš„ API ç«¯ç‚¹

| æ¨¡å— | ç«¯ç‚¹æ•°é‡ | çŠ¶æ€ |
|------|---------|------|
| è®¤è¯æ¨¡å— | 3 | âœ… |
| ç”¨æˆ·æ¨¡å— | 13 | âœ… |
| å‘ç°æ¨¡å— | 7 | âœ… |
| éœ€æ±‚æ¨¡å— | 7 | âœ… |
| è®¢å•æ¨¡å— | 8 | âœ… |
| è¯„ä»·æ¨¡å— | 7 | âœ… |
| **æ€»è®¡** | **45** | **âœ…** |

---

## ä»£ç ç»Ÿè®¡

### åç«¯ä»£ç 
```
server/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ auth/           # è®¤è¯æ¨¡å— (5 files, ~400 lines)
â”‚   â”œâ”€â”€ common/         # å…¬å…±æ¨¡å— (8 files, ~500 lines)
â”‚   â”œâ”€â”€ config/         # é…ç½®æ¨¡å— (1 file, ~100 lines)
â”‚   â”œâ”€â”€ database/       # æ•°æ®åº“æ¨¡å— (2 files, ~100 lines)
â”‚   â”œâ”€â”€ users/          # ç”¨æˆ·æ¨¡å— (7 files, ~900 lines)
â”‚   â”œâ”€â”€ discovery/      # å‘ç°æ¨¡å— (5 files, ~900 lines)
â”‚   â”œâ”€â”€ demands/        # éœ€æ±‚æ¨¡å— (6 files, ~1,100 lines)
â”‚   â”œâ”€â”€ orders/         # è®¢å•æ¨¡å— (3 files, ~900 lines)
â”‚   â”œâ”€â”€ reviews/        # è¯„ä»·æ¨¡å— (5 files, ~650 lines)
â”‚   â”œâ”€â”€ app.module.ts
â”‚   â””â”€â”€ main.ts
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma   # æ•°æ®åº“æ¨¡å‹ (~800 lines)
â”œâ”€â”€ .env
â”œâ”€â”€ package.json
â””â”€â”€ README.md

æ€»è®¡ï¼š~6,350 è¡Œä»£ç 
```

---

## å¾…å®ŒæˆåŠŸèƒ½

### é«˜ä¼˜å…ˆçº§
1. **å¾®ä¿¡æ”¯ä»˜é›†æˆ**
   - å¾®ä¿¡æ”¯ä»˜SDKé›†æˆ
   - æ”¯ä»˜è®¢å•åˆ›å»º
   - æ”¯ä»˜å›è°ƒå¤„ç†
   - é€€æ¬¾APIé›†æˆ

2. **PostGIS åœ°ç†ä½ç½®è®¡ç®—**
   - çœŸå®è·ç¦»è®¡ç®—
   - åœ°ç†ä½ç½®ç´¢å¼•
   - æœåŠ¡åŠå¾„ç­›é€‰

3. **æ¶ˆæ¯é˜Ÿåˆ—**
   - Bull + Redis é…ç½®
   - å¼‚æ­¥ä»»åŠ¡å¤„ç†
   - é€šçŸ¥æ¨é€é˜Ÿåˆ—

4. **å®šæ—¶ä»»åŠ¡**
   - è®¢å•è¶…æ—¶å¤„ç†
   - é”å®šè¶…æ—¶å¤„ç†
   - è‡ªåŠ¨ç¡®è®¤è®¢å•

### ä¸­ä¼˜å…ˆçº§
1. **éœ€æ±‚å¤§å…**
   - éœ€æ±‚å¤§å…åˆ—è¡¨
   - é¡¾é—®ç”³è¯·éœ€æ±‚
   - ç­›é€‰å’Œæ’åº

2. **å…³é”®è¯æœç´¢**
   - å…¨æ–‡æœç´¢ï¼ˆPostgreSQLï¼‰
   - æˆ–é›†æˆ Elasticsearch

3. **å›¾ç‰‡ä¸Šä¼ **
   - è…¾è®¯äº‘COSé›†æˆ
   - å¤´åƒä¸Šä¼ 
   - è¯„ä»·å›¾ç‰‡ä¸Šä¼ 

4. **æ•°æ®åŠ å¯†**
   - æ•æ„Ÿæ•°æ®åŠ å¯†å­˜å‚¨
   - æ‰‹æœºå·åŠ å¯†
   - èº«ä»½è¯å·åŠ å¯†

### ä½ä¼˜å…ˆçº§
1. **ç®¡ç†åå°**
   - ç®¡ç†å‘˜è®¤è¯
   - ç”¨æˆ·ç®¡ç†
   - è®¢å•ç®¡ç†
   - è¯„ä»·å®¡æ ¸
   - æ•°æ®ç»Ÿè®¡

2. **å¾®ä¿¡å°ç¨‹åºå‰ç«¯**
   - é¡µé¢å¼€å‘
   - ç»„ä»¶å¼€å‘
   - APIé›†æˆ

---

## éƒ¨ç½²å»ºè®®

### ç¯å¢ƒè¦æ±‚
- Node.js 22.x
- PostgreSQL 14+ (with PostGIS extension)
- Redis 6+
- pnpm 8+

### ç¯å¢ƒå˜é‡é…ç½®
```env
# Database
DATABASE_URL="postgresql://user:password@localhost:5432/uyou"

# Redis
REDIS_HOST="localhost"
REDIS_PORT=6379

# JWT
JWT_SECRET="your-secret-key"
JWT_EXPIRES_IN="7d"
JWT_REFRESH_SECRET="your-refresh-secret"
JWT_REFRESH_EXPIRES_IN="30d"

# WeChat
WECHAT_APP_ID="your-app-id"
WECHAT_APP_SECRET="your-app-secret"

# Tencent Cloud
TENCENT_SECRET_ID="your-secret-id"
TENCENT_SECRET_KEY="your-secret-key"
TENCENT_COS_BUCKET="your-bucket"
TENCENT_COS_REGION="ap-shanghai"
```

### å¯åŠ¨å‘½ä»¤
```bash
# å®‰è£…ä¾èµ–
cd server
pnpm install

# æ•°æ®åº“è¿ç§»
pnpm prisma migrate dev

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm start:dev

# å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
pnpm build
pnpm start:prod
```

### API æ–‡æ¡£
å¯åŠ¨æœåŠ¡å™¨åè®¿é—®ï¼š`http://localhost:3000/api`

---

## æ€»ç»“

### å·²å®Œæˆ
âœ… **Phase 1: åŸºç¡€æ¶æ„æ­å»º**ï¼ˆ100%ï¼‰
- é¡¹ç›®åˆå§‹åŒ–
- æ•°æ®åº“è®¾è®¡
- å…¬å…±æ¨¡å—
- è®¤è¯æ¨¡å—

âœ… **Phase 2: ç”¨æˆ·ç«¯æ ¸å¿ƒåŠŸèƒ½**ï¼ˆ80%ï¼‰
- è®¤è¯æ¨¡å— âœ…
- ç”¨æˆ·æ¨¡å— âœ…
- å‘ç°æ¨¡å— âœ…
- éœ€æ±‚æ¨¡å— âœ…
- è®¢å•æ¨¡å— âœ…
- è¯„ä»·æ¨¡å— âœ…
- æ”¯ä»˜æ¨¡å— ğŸ”„ï¼ˆå¾…é›†æˆå¾®ä¿¡æ”¯ä»˜ï¼‰
- é€šçŸ¥æ¨¡å— ğŸ”„ï¼ˆå¾…å®ç°ï¼‰

### æ ¸å¿ƒåŠŸèƒ½
- âœ… 45ä¸ªAPIç«¯ç‚¹
- âœ… 6ä¸ªæ ¸å¿ƒä¸šåŠ¡æ¨¡å—
- âœ… æ™ºèƒ½æ¨èç®—æ³•
- âœ… æ™ºèƒ½åŒ¹é…ç®—æ³•
- âœ… 60ç§’é”å®šæœºåˆ¶
- âœ… é˜¶æ¢¯é€€æ¬¾ç³»ç»Ÿ
- âœ… åŒå‘è¯„ä»·ç³»ç»Ÿ
- âœ… å®Œæ•´çš„æ•°æ®åº“è®¾è®¡

### ä»£ç è´¨é‡
- âœ… TypeScript ä¸¥æ ¼æ¨¡å¼
- âœ… å®Œæ•´çš„ç±»å‹å®šä¹‰
- âœ… ç»Ÿä¸€çš„é”™è¯¯å¤„ç†
- âœ… ç»Ÿä¸€çš„å“åº”æ ¼å¼
- âœ… Swagger API æ–‡æ¡£
- âœ… æ¨¡å—åŒ–è®¾è®¡
- âœ… ä»£ç è§„èŒƒï¼ˆESLint + Prettierï¼‰

### ä¸‹ä¸€æ­¥
1. é›†æˆå¾®ä¿¡æ”¯ä»˜API
2. å®ç°PostGISåœ°ç†ä½ç½®è®¡ç®—
3. é…ç½®æ¶ˆæ¯é˜Ÿåˆ—ï¼ˆBull + Redisï¼‰
4. å®ç°å®šæ—¶ä»»åŠ¡
5. å¼€å‘ç®¡ç†åå°
6. å¼€å‘å¾®ä¿¡å°ç¨‹åºå‰ç«¯

---

**å¼€å‘å®Œæˆæ—¶é—´ï¼š** 2026-01-18  
**ä»£ç ä»“åº“ï¼š** https://github.com/yeegeek/uyou  
**å¼€å‘è€…ï¼š** Manus AI Agent
